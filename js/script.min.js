window.addEventListener('load',function(){let A=document.querySelector('.page-loader');A&&setTimeout(function(){A.classList.add('hidden')},500)});document.addEventListener('DOMContentLoaded',function(){d();e();f();h();i();k();m();c();let _=a();console.log('Página actual:',_);b(_)});function a(){let B=window.location.pathname,C=B.split('/').pop();if(!C||C===''||C==='index.html')return'index';return C.replace('.html','')}function b(_a){let _b=document.querySelectorAll('.nav-links a');for(const D of _b){D.classList.remove('active');let _A=D.getAttribute('href').replace('.html','');(_A===_a||(_A==='index'&&_a===''))&&D.classList.add('active')}}function c(){let E=document.querySelectorAll('.btn'),_c=document.querySelectorAll('.feature-card');for(const aA of E)aA.addEventListener('mouseenter',function(){this.style.transition='all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)'});let _B=document.querySelectorAll('.nav-links li');for(const[aB,aC] of _B.entries()){aC.style.animationDelay=`${0.1*aB}s`;aC.style.animation='fadeInDown 0.5s forwards'}for(const[aD,aE] of _c.entries()){aE.style.animationDelay=`${0.2+(0.1*aD)}s`;aE.style.animation='fadeIn 0.8s forwards'}}function d(){let aF=document.getElementById('theme-toggle');if(!aF)return;let aG=localStorage.getItem('theme');aG&&document.documentElement.setAttribute('data-theme',aG);aF.addEventListener('click',function(){let aH=document.documentElement.getAttribute('data-theme')||'light',aI=aH==='light'?'dark':'light';document.documentElement.setAttribute('data-theme',aI);localStorage.setItem('theme',aI)})}function e(){let aJ=document.querySelector('.menu-toggle'),aK=document.querySelector('.nav-links');if(!aJ||!aK)return;aJ.addEventListener('click',function(){aK.classList.toggle('active');let aL=aJ.querySelectorAll('.bar');for(const bar of aL)bar.classList.toggle('active')});let _C=aK.querySelectorAll('a');for(const aM of _C)aM.addEventListener('click',function(){aK.classList.remove('active');let aN=aJ.querySelectorAll('.bar');for(const bar of aN)bar.classList.remove('active')})}function f(){let aO=document.getElementById('login-btn'),aP=document.getElementById('register-btn'),aQ=document.getElementById('auth-modal'),_d=document.querySelector('.close-modal'),_e=document.querySelectorAll('.auth-tab');if(!aQ)return;aO?.addEventListener('click',function(){aQ.classList.add('active');g('login')});aP?.addEventListener('click',function(){aQ.classList.add('active');g('register')});_d?.addEventListener('click',function(){aQ.classList.remove('active')});for(const aR of _e)aR.addEventListener('click',function(){g(this.getAttribute('data-tab'))});window.addEventListener('click',function(aS){aS.target===aQ&&aQ.classList.remove('active')});let F=document.querySelectorAll('.auth-form');for(const aT of F)aT.addEventListener('submit',function(aU){aU.preventDefault();alert('Funcionalidad de autenticación en desarrollo.')})}function g(aV){let aW=document.querySelectorAll('.auth-tab'),aX=document.querySelectorAll('.auth-form');for(const aY of aW)aY.classList.remove('active');for(const aZ of aX)aZ.classList.remove('active');document.querySelector(`.auth-tab[data-tab="${aV}"]`).classList.add('active');document.getElementById(`${aV}-form`).classList.add('active')}function h(){let bA=document.querySelectorAll('.faq-item');if(!bA.length)return;for(const bB of bA){let bC=bB.querySelector('.faq-question');bC.addEventListener('click',function(){for(const bD of bA)(bD!==bB&&bD.classList.contains('active'))&&bD.classList.remove('active');bB.classList.toggle('active')})}}function i(){let bE=document.querySelector('.test-form');if(!bE)return;bE.addEventListener('submit',function(bF){bF.preventDefault();let bG=0,bH=bE.querySelectorAll('.test-question');for(const bI of bH){let bJ=bI.querySelector('input[type="radio"]:checked');bJ&&(bG+=parseInt(bJ.value))}j(bG)})}function j(bK){let bL=document.querySelector('.test-result'),G=document.getElementById('retake-test');if(!bL)return;bL.classList.remove('result-mild','result-moderate','result-severe');let bM,_D,_E;if(bK>=0&&bK<=4){bM='Mínima';_D='result-mild';_E='Tu nivel de ansiedad es mínimo. Continúa monitoreando tus emociones y practica técnicas de autocuidado regularmente.'}else if(bK>=5&&bK<=9){bM='Leve';_D='result-mild';_E='Presentas síntomas de ansiedad leve. Te recomendamos implementar técnicas de relajación y mindfulness en tu rutina diaria.'}else bK>=10&&bK<=14?(bM='Moderada',_D='result-moderate',_E='Presentas síntomas de ansiedad moderada. Considera consultar con un profesional de la salud mental para recibir orientación adicional.'):(bM='Severa',_D='result-severe',_E='Presentas síntomas de ansiedad severa. Te recomendamos buscar ayuda profesional lo antes posible para recibir el apoyo adecuado.');bL.innerHTML=`
        <h3>Resultado: Ansiedad ${bM}</h3>
        <p>Puntuación: ${bK} / 21</p>
        <p>${_E}</p>
        <div class="result-actions">
            <button class="btn btn-primary" id="save-result">Guardar resultado</button>
            <button class="btn btn-outline" id="retake-test">Realizar test nuevamente</button>
        </div>
    `;bL.classList.add(_D);bL.style.display='block';bL.scrollIntoView({behavior:'smooth',block:'center'});let _f=document.getElementById('save-result');_f?.addEventListener('click',function(){alert('Resultado guardado correctamente.')});G?.addEventListener('click',function(){testForm.reset();bL.style.display='none';window.scrollTo({top:testForm.offsetTop,behavior:'smooth'})})}function k(){let bN=document.querySelector('.diary-form'),bO=document.querySelectorAll('.mood-btn');if(!bN||!bO.length)return;for(const bP of bO)bP.addEventListener('click',function(){for(const bR of bO)bR.classList.remove('selected');this.classList.add('selected');let bQ=document.getElementById('mood-input');bQ&&(bQ.value=this.getAttribute('data-mood'))});bN.addEventListener('submit',function(bS){bS.preventDefault();let bT=document.getElementById('mood-input'),bU=document.getElementById('entry-text');if(!bT||!bU)return;if(!bT.value){alert('Por favor, selecciona cómo te sientes hoy.');return}if(!bU.value.trim()){alert('Por favor, escribe algo en tu entrada del diario.');return}l(bT.value,bU.value);bN.reset();for(const bV of bO)bV.classList.remove('selected');alert('Entrada guardada correctamente. ¡Continúa con tu racha!')})}function l(bW,bX){console.log('Guardando entrada:',{mood:bW,text:bX,date:new Date})}function m(){let bY=document.querySelectorAll('.testimonial'),bZ=document.querySelector('.prev-testimonial'),cA=document.querySelector('.next-testimonial');if(!bY.length||!bZ||!cA)return;let cB=0;function cC(){for(const[cD,cE] of bY.entries())cE.style.display=cD===cB?'block':'none'}cC();bZ.addEventListener('click',function(){cB=(cB-1+bY.length)%bY.length;cC()});cA.addEventListener('click',function(){cB=(cB+1)%bY.length;cC()});setInterval(function(){cB=(cB+1)%bY.length;cC()},5000)}document.addEventListener('scroll',function(){let cF=document.querySelectorAll('.animate-on-scroll');for(const cG of cF){let cH=cG.getBoundingClientRect().top,cI=window.innerHeight;cH<cI*0.8&&cG.classList.add('animated')}});
